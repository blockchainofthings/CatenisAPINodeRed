<script type="text/javascript">
    RED.nodes.registerType('list notification events', {
        category: 'catenis',
        color: '#a2a7cd',
        defaults: {
            name: { value: "" },
            device: { value: "", type: "catenis device" }
        },
        inputs: 0,
        outputs: 1,
        icon: "file.png",
        label: function () {
            return this.name || "list notification events";
        },
        button: {
            enabled: true,
            onclick: function() {
                var node = this;
                $.ajax({
                    url: "catenis.listnotificationevents/" + this.id,
                    type:"POST",
                    success: function(resp) {
                        RED.notify("Success", "success");
                    },
                    error: function(jqXHR,textStatus,errorThrown) {
                        if (jqXHR.status == 404) {
                            RED.notify("Error - please deploy", "error");
                        } else if (jqXHR.status == 500) {
                            RED.notify("Error - server error", "error");
                        } else if (jqXHR.status == 0) {
                            RED.notify("Error - no response", "error");
                        } else {
                            RED.notify("Error - unexpected response", "error");
                        }
                    }
                });
            }
        }
    });
</script>

<script type="text/x-red" data-template-name="list notification events">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-device"><i class="fa fa-microchip"></i> Device</label>
        <input type="text" id="node-input-device">
    </div>
</script>

<script type="text/x-red" data-help-name="list notification events">
    <p>Call Catenis API to retrieve a list of system defined notification events.</p>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>&lt;event_name&gt;<span class="property-type">string</span></dt>
        <dd>the keys in the response object are the event names and the values are the corresponding descriptions</dd>
    </dl>
    <h3>Details</h3>
    <p>This node is to be used exclusively in interactive mode, where the end user clicks on the action button and the Catenis API end-point is called using the parameters set in the node’s configuration.</p>
    <p>The data returned from a successful call to the Catenis API end-point are passed through the node’s single output.</p>
</script>
